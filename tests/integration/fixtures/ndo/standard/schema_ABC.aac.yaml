---
ndo:
  schemas:
    - name: ABC
      templates:
        - name: TEMPLATE1
          tenant: NDO1
          application_profiles:
            - name: AP1
              endpoint_groups:
                - name: EPG1
                  useg: false
                  intra_epg_isolation: false
                  proxy_arp: false
                  preferred_group: false
                  bridge_domain:
                    name: BD1
                  subnets:
                    - ip: 2.2.2.2/24
                      scope: private
                      shared: false
                      no_default_gateway: true
                    - ip: 3.3.3.3/24
                      scope: private
                      shared: false
                      no_default_gateway: true
                      primary: true
                  contracts:
                    consumers:
                      - name: CONTRACT1
                    providers:
                      - name: CONTRACT1
                  sites:
                    - name: APIC1
                      physical_domains:
                        - name: PHYSICAL1
                          deployment_immediacy: immediate
                          resolution_immediacy: immediate
                      vmware_vmm_domains:
                        - name: VMM1
                          deployment_immediacy: lazy
                          resolution_immediacy: immediate
                          vlan_mode: static
                          vlan: 123
                          u_segmentation: true
                          useg_vlan: 124
                      static_ports:
                        - type: port
                          pod: 1
                          node: 101
                          port: 40
                          vlan: 234
                          deployment_immediacy: lazy
                          mode: regular
                        - type: port
                          deployment_immediacy: immediate
                          port: 20
                          mode: native
                          sub_port: 1
                          pod: 1
                          node: 101
                          vlan: 234
                        - type: port
                          node: 101
                          fex: 101
                          port: 20
                          vlan: 234
                        - type: vpc
                          channel: VPC1
                          node_1: 101
                          node_2: 102
                          vlan: 234
                        - type: pc
                          channel: VPC1
                          deployment_immediacy: immediate
                          node: 101
                          vlan: 234
                      static_leafs:
                        - pod: 1
                          node: 102
                          vlan: 235
                      subnets:
                        - ip: 6.5.4.3/24
                          description: My Desc
                          scope: private
                          shared: false
                          no_default_gateway: false
                        - ip: 5.4.3.2/24
                          description: My Desc
                          scope: private
                          shared: false
                          no_default_gateway: false
                          primary: true
                - name: EPG2
                  bridge_domain:
                    name: BD2
                  sites:
                    - name: APIC1
                      physical_domains:
                        - name: PHYSICAL1
                      vmware_vmm_domains:
                        - name: VMM1
                      static_ports:
                        - node: 101
                          port: 41
                          vlan: 236
          vrfs:
            - name: VRF1
            - name: VRF2
              l3_multicast: true
              vzany: true
              contracts:
                consumers:
                  - name: CONTRACT2
          bridge_domains:
            - name: BD1
              l2_unknown_unicast: proxy
              intersite_bum_traffic: false
              optimize_wan_bandwidth: false
              l2_stretch: true
              l3_multicast: false
              # dhcp_relay_policy: ANS-REL1
              # dhcp_option_policy: ANS-OPT1
              vrf:
                name: VRF1
              subnets:
                - ip: 1.1.1.1/24
                  scope: private
                  shared: false
                  querier: false
                - ip: 4.4.4.4/24
                  scope: private
                  shared: false
                  querier: false
                  primary: true
              sites:
                - name: APIC1
                  mac: 00:22:BD:F8:19:EE
                  advertise_host_routes: true
                  l3outs:
                    - L3OUT
            - name: BD2
              # dhcp_relay_policy: ANS-REL2
              vrf:
                name: VRF2
              sites:
                - name: APIC1
            - name: BD3
              vrf:
                name: VRF2
              # dhcp_policies:
              #   - dhcp_relay_policy: ANS-REL1
              #     dhcp_option_policy: ANS-OPT1
              #   - dhcp_relay_policy: ANS-REL2
          filters:
            - name: FILTER1
              entries:
                - name: HTTP
                  description: HTTP Filter
                  ethertype: ip
                  protocol: tcp
                  source_from_port: unspecified
                  source_to_port: unspecified
                  destination_from_port: http
                  destination_to_port: http
                  stateful: true
            - name: FILTER2
              entries:
                - name: HTTP
                  destination_from_port: http
                - name: ANY
                  ethertype: unspecified
          l3outs:
            - name: L3OUT1
              vrf:
                name: VRF1
          external_endpoint_groups:
            - name: EXT-EPG1
              preferred_group: false
              vrf:
                name: VRF1
              l3out:
                name: L3OUT1
              subnets:
                - prefix: 0.0.0.0/0
                  import_route_control: true
                  export_route_control: true
                  shared_route_control: true
                  import_security: true
                  shared_security: true
                  aggregate_import: true
                  aggregate_export: true
                  aggregate_shared: true
                - prefix: 10.0.0.0/8
              contracts:
                consumers:
                  - name: CONTRACT1
                providers:
                  - name: CONTRACT1
            - name: EXT-EPG2
              vrf:
                name: VRF1
              l3out:
                name: L3OUT1
          contracts:
            - name: CONTRACT1
              scope: context
              type: bothWay
              filters:
                - name: FILTER1
              service_graph:
                name: SG1
                nodes:
                  - name: FW1
                    provider:
                      bridge_domain: BD1
                      sites:
                        - name: APIC1
                          device: DEV1
                          logical_interface: INT1
                          redirect_policy: PBR1
                    consumer:
                      bridge_domain: BD1
                      sites:
                        - name: APIC1
                          device: DEV1
                          logical_interface: INT1
                          redirect_policy: PBR1
                  - name: LB1
                    provider:
                      bridge_domain: BD1
                      sites:
                        - name: APIC1
                          device: DEV2
                          logical_interface: INT1
                          redirect_policy: PBR2
                    consumer:
                      bridge_domain: BD1
                      sites:
                        - name: APIC1
                          device: DEV2
                          logical_interface: INT1
                          redirect_policy: PBR2
            - name: CONTRACT2
              scope: context
              type: bothWay
              filters:
                - name: FILTER1
          service_graphs:
            - name: SG1
              description: My Desc
              nodes:
                - name: FW1
                  sites:
                    - name: APIC1
                      device: DEV1
                - name: LB1
                  type: "load-balancer"
                  index: 2
                  sites:
                    - name: APIC1
                      device: DEV2
          sites:
            - APIC1
        - name: TEMPLATE2
          tenant: NDO1
